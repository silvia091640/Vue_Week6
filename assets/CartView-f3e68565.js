import{_ as p,o as c,c as d,a as h,d as t,F as _,f as m,g,t as o,h as v,v as f}from"./index-10ec1674.js";const{VITE_APP_URL:r,VITE_APP_PATH:i}={VITE_APP_URL:"https://vue3-course-api.hexschool.io/v2",VITE_APP_PATH:"silvia-hexschool",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0},x={data(){return{carts:[],cartData:{product_id:"",qty:1}}},methods:{getCarts(){this.$http.get(`${r}/api/${i}/cart`).then(e=>{this.carts=e.data.data}).catch(e=>{console.log(e)})},updateCart(e){console.log(e),this.cartData.product_id=e.id,this.cartData.qty=e.qty,this.$http.put(`${r}/api/${i}/cart/${e.id}`,{data:this.cartData}).then(s=>{this.getCarts(),alert(s.data.message)}).catch(s=>{console.log(s)})},removeCartItem(e){this.$http.delete(`${r}/api/${i}/cart/${e}`).then(s=>{this.getCarts(),alert(s.data.message)}).catch(s=>{console.log(s)})}},mounted(){this.getCarts()}},b={class:"container"},y={class:"mt-4"},C={class:"table align-middle"},$=t("thead",null,[t("tr",null,[t("th"),t("th",null,"品名"),t("th",{style:{width:"150px"}},"數量/單位"),t("th",null,"單價")])],-1),P=["onClick"],V=t("i",{class:"fas fa-spinner fa-pulse"},null,-1),D={class:"input-group input-group-sm"},E={class:"input-group mb-3"},T=["onUpdate:modelValue","onBlur"],A={class:"input-group-text",id:"basic-addon2"},k={class:"text-end"},B=t("td",{colspan:"3",class:"text-end"},"總計",-1),I={class:"text-end"};function q(e,s,U,L,n,u){return c(),d(_,null,[h(" 這是購物車頁面 "),t("div",b,[t("div",y,[t("table",C,[$,t("tbody",null,[n.carts?(c(!0),d(_,{key:0},m(n.carts.carts,a=>(c(),d("tr",{key:a.id},[t("td",null,[t("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:l=>u.removeCartItem(a.id)},[V,h(" x ")],8,P)]),t("td",null,o(a.product.title),1),t("td",null,[t("div",D,[t("div",E,[v(t("input",{min:"1",type:"number",class:"form-control","onUpdate:modelValue":l=>a.qty=l,onBlur:l=>u.updateCart(a)},null,40,T),[[f,a.qty,void 0,{number:!0}]]),t("span",A,o(a.product.unit),1)])])]),t("td",k,o(a.final_total),1)]))),128)):g("",!0)]),t("tfoot",null,[t("tr",null,[B,t("td",I,o(n.carts.total),1)])])])])])],64)}const w=p(x,[["render",q]]);export{w as default};
