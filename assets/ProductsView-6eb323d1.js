import{_ as g,e as $,r as b,o as l,c as i,a as d,d as t,F as h,f,n as P,t as c,b as k,w as v}from"./index-03166cc8.js";const{VITE_APP_URL:n,VITE_APP_PATH:r}={VITE_APP_URL:"https://vue3-course-api.hexschool.io/v2",VITE_APP_PATH:"silvia-hexschool",BASE_URL:"/Vue_Week6/",MODE:"production",DEV:!1,PROD:!0},y={data(){return{products:[],carts:[],cartData:{product_id:"",qty:1},isLoading:!1}},components:{RouterLink:$},methods:{getAllProducts(){this.$http.get(`${n}/api/${r}/products/all`).then(s=>{this.products=s.data.products,this.isLoading=!1}).catch(s=>{console.log(s)})},getCarts(){this.$http.get(`${n}/api/${r}/cart`).then(s=>{this.carts=s.data.data}).catch(s=>{console.log(s)})},addCart(s,e=1){this.cartData.product_id=s,this.cartData.qty=e,this.$http.post(`${n}/api/${r}/cart`,{data:this.cartData}).then(o=>{alert(o.data.message),this.getCarts()}).catch(o=>{console.log(o)})},updateCart(s){this.cartData.product_id=s.id,this.cartData.qty=s.qty,this.$http.put(`${n}/api/${r}/cart/${s.id}`,{data:this.cartData}).then(e=>{this.getCarts(),alert(e.data.message)}).catch(e=>{console.log(e)})}},mounted(){this.getAllProducts()}},D={class:"container"},C={class:"mt-4"},V={class:"table align-middle"},m=t("thead",null,[t("tr",null,[t("th",null,"圖片"),t("th",null,"商品名稱"),t("th",null,"價格"),t("th")])],-1),x={style:{width:"200px"}},A={class:"h5"},L={class:"h6"},E={class:"h5"},R={class:"btn-group btn-group-sm"},T=["onClick"],I=t("i",{class:"fas fa-spinner fa-pulse"},null,-1);function q(s,e,o,w,u,_){const p=b("RouterLink");return l(),i(h,null,[d(" 這是產品頁面 "),t("div",D,[t("div",C,[t("table",V,[m,t("tbody",null,[(l(!0),i(h,null,f(u.products,a=>(l(),i("tr",{key:a.id},[t("td",x,[t("div",{style:P([{height:"100px","background-size":"cover","background-position":"center"},{backgroundImage:`url(${a.imageUrl})`}])},null,4)]),t("td",null,c(a.title),1),t("td",null,[t("div",A,c(a.origin_price)+" 元",1),t("del",L,"原價 "+c(a.origin_price)+" 元",1),t("div",E,"現在只要 "+c(a.price)+" 元",1)]),t("td",null,[t("div",R,[k(p,{to:`/product/${a.id}`,class:"btn btn-outline-secondary"},{default:v(()=>[d("查看產品")]),_:2},1032,["to"]),t("button",{type:"button",class:"btn btn-outline-danger",onClick:B=>_.addCart(a.id)},[I,d(" 加到購物車 ")],8,T)])])]))),128))])])])])],64)}const N=g(y,[["render",q]]);export{N as default};
